// payorder.js
Page({

  /**
   * 页面的初始数据
   */
  data: {
  agreement:false
  },
  //////////////倒计时/////////////
  countdown:function(that,e){
    console.log(e)
      var num=e*60*60
      var time=setInterval(function(){
          num--
          var h=Math.floor(num/60/60)
          var m=Math.floor(num/60%60)
          var s = Math.floor(num % 60)
          var _h=that.slice_time(h)
          var _m = that.slice_time(m)
          var _s = that.slice_time(s)
          that.setData({ h0: _h[0], h1: _h[1], m0: _m[0], m1: _m[1], s0: _s[0], s1: _s[1]})
          if(num<=0){
            clearInterval(time)
          }
        },1000)
      
  },
  slice_time:function(e){
    var str = e.toString()
      if(str.length>=2){
        var a=str.split('')
      }else{
        var a=['0',str]
      }
      return a
  },
agreement:function(e){
  var agre = e.detail.value
  this.setData({agreement:agre})
},
pay:function(){
  var that=this
  if(this.data.agreement){
    console.log(true)
  }else{
    console.log(66)
    wx.showModal({
      title: '提示',
      content: '您还未同意我们的《报名须知及服务协议》！',
      success:function(res){
        if (res.confirm) {
            that.setData({agreement:true})
        } 
      }
    })
  }
},
  /**
   * 生命周期函数--监听页面加载
   */
  onLoad: function (options) {
    this.countdown(this,2)
  },

  /**
   * 生命周期函数--监听页面初次渲染完成
   */
  onReady: function () {
  
  },

  /**
   * 生命周期函数--监听页面显示
   */
  onShow: function () {
  
  },

  /**
   * 生命周期函数--监听页面隐藏
   */
  onHide: function () {
  
  },

  /**
   * 生命周期函数--监听页面卸载
   */
  onUnload: function () {
  
  },

  /**
   * 页面相关事件处理函数--监听用户下拉动作
   */
  onPullDownRefresh: function () {
  
  },

  /**
   * 页面上拉触底事件的处理函数
   */
  onReachBottom: function () {
  
  },

  /**
   * 用户点击右上角分享
   */
  onShareAppMessage: function () {
  
  },

  /**
   * 页面上拉触底事件的处理函数
   */
  onReachBottom: function () {
  
  },

  /**
   * 页面相关事件处理函数--监听用户下拉动作
   */
  onPullDownRefresh: function () {
  
  }
})