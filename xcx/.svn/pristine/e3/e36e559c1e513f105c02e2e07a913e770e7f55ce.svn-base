<block wx:if="{{input_wrap}}">
  <view class="wrap">
    <view class="head_wrap">
      <image class="head_img" src="http://weixin.zx-tour.com/static/xcx_img/perfect_info.png"></image>
    </view>
  </view>
  <view class="msg_title">
    <text class="title_msg">基本信息</text>
    <button type="primary" class="btn_user">选择参赛人</button>
    <picker mode="selector" class="user_picker" range="{{userarr}}" value="{{user_choice}}" bindchange="user_change">
      <text>{{userarr[user_choice]}}</text>
    </picker>
  </view>
  <view class="info_wrap">
    <view class="msg_wrap" wx:if="{{field[0].name.isshow == '1'}}">
      <view class="input_msg">
        <block wx:if="{{field[0].name.mand == '1'}}">
          <view class="special_icon">
            <view></view>
            <view></view>
            <view></view>
          </view>
          <text class="msg_name_import">真实姓名</text>
        </block>
        <block wx:else>
          <text class="msg_name">真实姓名</text>
        </block>
        <input class="input_type" value="{{userdata.name}}" data-name="name" type="text" placeholder="用于上报组委会，请认真填写" bindblur="bindmsg" />
      </view>
    </view>
    <view class="msg_wrap" wx:if="{{field[0].broad_country.isshow == '1'}}">
      <view class="input_msg">
        <block wx:if="{{field[0].broad_country.mand == '1'}}">
          <view class="special_icon">
            <view></view>
            <view></view>
            <view></view>
          </view>
          <text class="msg_name_import">国籍</text>
        </block>
        <block wx:else>
          <text class="msg_name">国籍</text>
        </block>
        <view class="go_down_icon"></view>
        <view class="picker_show" catchtap="country_choice">{{userdata.broad_country}}</view>
      </view>
    </view>
    <view class="msg_wrap" wx:if="{{field[0].sfz_code.isshow == '1'}}">
      <view class="input_msg">
        <block wx:if="{{field[0].sfz_code.mand == '1'}}">
          <view class="special_icon">
            <view></view>
            <view></view>
            <view></view>
          </view>
          <text class="msg_name_import">身份证</text>
        </block>
        <block wx:else>
          <text class="msg_name">身份证</text>
        </block>
        <input class="input_type" type="idcard" data-name="sfz_code" value="{{userdata.sfz_code}}" placeholder="请确认是否正确，错误会影响报名" bindblur="bindmsg" />
      </view>
    </view>
    <view class="msg_wrap" wx:if="{{field[0].phone.isshow == '1'}}">
      <view class="input_msg">
        <block wx:if="{{field[0].phone.mand == '1'}}">
          <view class="special_icon">
            <view></view>
            <view></view>
            <view></view>
          </view>
          <text class="msg_name_import">手机号</text>
        </block>
        <block wx:else>
          <text class="msg_name">手机号</text>
        </block>
        <input class="input_type" type="number" data-name="phone" value="{{userdata.phone}}" placeholder="确认后无法修改，将加密处理" bindblur="bindmsg" />
      </view>
    </view>
    <view class="msg_wrap" wx:if="{{field[0].birth.isshow == '1'}}">
      <view class="input_msg">
        <block wx:if="{{field[0].birth.mand == '1'}}">
          <view class="special_icon">
            <view></view>
            <view></view>
            <view></view>
          </view>
          <text class="msg_name_import">生日</text>
        </block>
        <block wx:else>
          <text class="msg_name">生日</text>
        </block>
        <view class="go_down_icon"></view>
        <picker class="picker_show" mode="date" start="1900-01-01" end="2100-01-01" value="{{userdata.birth}}" bindchange="birthday_change">
          <text>{{userdata.birth}}</text>
        </picker>
      </view>
    </view>
    <view class="msg_wrap" wx:if="{{field[0].sexy.isshow == '1'}}">
      <view class="input_msg">
        <block wx:if="{{field[0].sexy.mand == '1'}}">
          <view class="special_icon">
            <view></view>
            <view></view>
            <view></view>
          </view>
          <text class="msg_name_import">性别</text>
        </block>
        <block wx:else>
          <text class="msg_name">性别</text>
        </block>
        <view class="go_down_icon"></view>
        <picker mode="selector" class="picker_show" range="{{sexyarr}}" value="{{sexyindex}}" bindchange="sexy_change">
          <text>{{sexyarr[sexyindex]}}</text>
        </picker>
      </view>
    </view>
    <view class="msg_wrap" wx:if="{{field[0].blood_type.isshow == '1'}}">
      <view class="input_msg">
        <block wx:if="{{field[0].blood_type.mand == '1'}}">
          <view class="special_icon">
            <view></view>
            <view></view>
            <view></view>
          </view>
          <text class="msg_name_import == '1'">血型</text>
        </block>
        <block wx:else>
          <text class="msg_name">血型</text>
        </block>
        <view class="go_down_icon"></view>
        <picker mode="selector" class="picker_show" range="{{bloodtype}}" value="{{bloodindex}}" bindchange="blood_change">
          <text>{{bloodtype[bloodindex]}}</text>
        </picker>
      </view>
    </view>
    <view class="msg_wrap" wx:if="{{field[0].area.isshow == '1'}}">
      <view class="input_msg">
        <block wx:if="{{field[0].area.mand == '1'}}">
          <view class="special_icon">
            <view></view>
            <view></view>
            <view></view>
          </view>
          <text class="msg_name_import">地区</text>
        </block>
        <block wx:else>
          <text class="msg_name">地区</text>
        </block>
        <view class="go_down_icon"></view>
        <view class="picker_show" catchtap="area_choice">{{userdata.area}}</view>
      </view>
    </view>
    <view class="msg_wrap" wx:if="{{field[0].addr.isshow == '1'}}">
      <view class="input_msg">
        <block wx:if="{{field[0].addr.mand == '1'}}">
          <view class="special_icon">
            <view></view>
            <view></view>
            <view></view>
          </view>
          <text class="msg_name_import">详细地址</text>
        </block>
        <block wx:else>
          <text class="msg_name">详细地址</text>
        </block>
        <input class="input_type" data-name="addr" value="{{userdata.addr}}" type="text" placeholder="请输入街道门牌信息" bindblur="bindmsg" />
      </view>
    </view>
    <view class="msg_wrap" wx:if="{{field[0].postcode.isshow == '1'}}">
      <view class="input_msg">
        <block wx:if="{{field[0].postcode.mand == '1'}}">
          <view class="special_icon">
            <view></view>
            <view></view>
            <view></view>
          </view>
          <text class="msg_name_import">邮编</text>
        </block>
        <block wx:else>
          <text class="msg_name">邮编</text>
        </block>
        <input class="input_type" data-name="postcode" value="{{userdata.postcode}}" type="text" placeholder="请输入邮政编码" bindblur="bindmsg" />
      </view>
    </view>
    <view class="msg_wrap" wx:if="{{field[0].e_mail.isshow == '1'}}">
      <view class="input_msg">
        <block wx:if="{{field[0].e_mail.mand == '1'}}">
          <view class="special_icon">
            <view></view>
            <view></view>
            <view></view>
          </view>
          <text class="msg_name_import">邮箱</text>
        </block>
        <block wx:else>
          <text class="msg_name">邮箱</text>
        </block>
        <input class="input_type" data-name="e_mail" value="{{userdata.e_mail}}" type="text" placeholder="用于接受赛事信息和通知" bindblur="bindmsg" />
      </view>
    </view>
    <view class="msg_wrap" wx:if="{{field[0].cloth_size.isshow == '1'}}">
      <view class="input_msg">
        <block wx:if="{{field[0].cloth_size.mand == '1'}}">
          <view class="special_icon">
            <view></view>
            <view></view>
            <view></view>
          </view>
          <text class="msg_name_import">服装尺码</text>
        </block>
        <block wx:else>
          <text class="msg_name">服装尺码</text>
        </block>
        <view class="go_down_icon"></view>
        <picker mode="selector" class="picker_show" range="{{clothsize}}" value="{{clothindex}}" bindchange="cloth_change">
          <text>{{clothsize[clothindex]}}</text>
        </picker>
      </view>
    </view>
    <view class="msg_wrap" wx:if="{{field[0].contact_name.isshow == '1'}}">
      <view class="input_msg">
        <block wx:if="{{field[0].contact_name.mand == '1'}}">
          <view class="special_icon">
            <view></view>
            <view></view>
            <view></view>
          </view>
          <text class="msg_name_import">紧急联系人</text>
        </block>
        <block wx:else>
          <text class="msg_name">紧急联系人</text>
        </block>
        <input class="input_type" data-name="contact_name" value="{{userdata.contact_name}}" type="text" placeholder="请输入紧急联系人姓名" bindblur="bindmsg" />
      </view>
    </view>
    <view class="msg_wrap" wx:if="{{field[0].contact_phone.isshow == '1'}}">
      <view class="input_msg">
        <block wx:if="{{field[0].contact_phone.mand == '1'}}">
          <view class="special_icon">
            <view></view>
            <view></view>
            <view></view>
          </view>
          <text class="msg_name_import">联系人电话</text>
        </block>
        <block wx:else>
          <text class="msg_name">联系人电话</text>
        </block>
        <input class="input_type" data-name="contact_phone" value="{{userdata.contact_phone}}" type="number" placeholder="请输入紧急联系人电话" bindblur="bindmsg" />
      </view>
    </view>
    <view class="msg_wrap" wx:if="{{field[0].pass_code.isshow == '1'}}">
      <view class="input_msg">
        <block wx:if="{{field[0].pass_code.mand == '1'}}">
          <view class="special_icon">
            <view></view>
            <view></view>
            <view></view>
          </view>
          <text class="msg_name_import">护照号码</text>
        </block>
        <block wx:else>
          <text class="msg_name">护照号码</text>
        </block>
        <input class="input_type" data-name="pass_code" value="{{userdata.pass_code}}" type="text" placeholder="很重要，如果护照不在手边请之后补填" bindblur="bindmsg" />
      </view>
    </view>
    <view class="msg_wrap" wx:if="{{field[0].surname.isshow == '1'}}">
      <view class="input_msg">
        <block wx:if="{{field[0].surname.mand == '1'}}">
          <view class="special_icon">
            <view></view>
            <view></view>
            <view></view>
          </view>
          <text class="msg_name_import">中文姓拼音</text>
        </block>
        <block wx:else>
          <text class="msg_name">中文姓拼音</text>
        </block>
        <input class="input_type" data-name="surname" value="{{userdata.surname}}" type="text" placeholder="请以护照姓拼音为准" bindblur="bindmsg" />
      </view>
    </view>
    <view class="msg_wrap" wx:if="{{field[0].en_name.isshow == '1'}}">
      <view class="input_msg">
        <block wx:if="{{field[0].en_name.mand  == '1'}}">
          <view class="special_icon">
            <view></view>
            <view></view>
            <view></view>
          </view>
          <text class="msg_name_import">中文名拼音</text>
        </block>
        <block wx:else>
          <text class="msg_name">中文名拼音</text>
        </block>
        <input class="input_type" data-name="en_name" value="{{userdata.en_name}}" type="text" placeholder="请以护照名拼音为准" bindblur="bindmsg" />
      </view>
    </view>
    <view class="msg_wrap" wx:if="{{field[0].issue_date.isshow == '1'}}">
      <view class="input_msg">
        <block wx:if="{{field[0].issue_date.mand == '1'}}">
          <view class="special_icon">
            <view></view>
            <view></view>
            <view></view>
          </view>
          <text class="msg_name_import">签发日期</text>
        </block>
        <block wx:else>
          <text class="msg_name">签发日期</text>
        </block>
        <view class="go_down_icon"></view>
        <picker class="picker_show" mode="date" start="1900-01-01" end="2100-01-01" value="{{userdata.issue_date}}" bindchange="issue_date_change">
          <text>{{userdata.issue_date}}</text>
        </picker>
      </view>
    </view>
    <view class="msg_wrap" wx:if="{{field[0].expiry_date.isshow == '1'}}">
      <view class="input_msg">
        <block wx:if="{{field[0].expiry_date.mand == '1'}}">
          <view class="special_icon">
            <view></view>
            <view></view>
            <view></view>
          </view>
          <text class="msg_name_import">有效期至</text>
        </block>
        <block wx:else>
          <text class="msg_name">有效期至</text>
        </block>
        <view class="go_down_icon"></view>
        <picker class="picker_show" mode="date" start="1900-01-01" end="2100-01-01" value="{{userdata.expiry_date}}" bindchange="expiry_date_change">
          <text>{{userdata.expiry_date}}</text>
        </picker>
      </view>
    </view>
    <view class="msg_title choose_title" wx:if="{{field[0].isattended.isshow == '1' || field[0].personbest.isshow == '1' || field[0].personbestmatch.isshow == '1' || field[0].wishfinish.isshow == '1' || field[0].proveimg.isshow == '1' || field[0].healthyimg.isshow == '1'}}">
      <text class="title_msg">参赛信息</text>
      <text wx:if="{{field[0].proveimg.isshow == '1' || field[0].healthyimg.isshow == '1'}}" class="img_msg">（由于赛制需要，请上传证明）</text>
    </view>
    <view class="msg_wrap" wx:if="{{field[0].isattended.isshow == '1'}}">
      <view class="input_msg">
        <block wx:if="{{field[0].isattended.mand == '1'}}">
          <view class="special_icon">
            <view></view>
            <view></view>
            <view></view>
          </view>
          <text class="msg_name_import long_msg">是否参加过马拉松</text>
        </block>
        <block wx:else>
          <text class="msg_name long_msg">是否参加过马拉松</text>
        </block>
        <view class="go_down_icon"></view>
        <picker mode="selector" class="picker_show pick_long" range="{{isattended}}" value="{{isattendedindex}}" bindchange="isattended_change">
          <text>{{isattended[isattendedindex]}}</text>
        </picker>
      </view>
    </view>
    <view class="msg_wrap" wx:if="{{field[0].personbest.isshow == '1' && isattendedindex == '1' }}">
      <view class="input_msg">
        <block wx:if="{{field[0].personbest.mand == '1'}}">
          <view class="special_icon">
            <view></view>
            <view></view>
            <view></view>
          </view>
          <text class="msg_name_import long_msg">马拉松最好成绩</text>
        </block>
        <block wx:else>
          <text class="msg_name long_msg">马拉松最好成绩</text>
        </block>
        <input class="input_type input_long" data-name="personbest" value="{{userdata.personbest}}" type="text" placeholder="请输入个人最好成绩" bindblur="bindmsg" />
      </view>
    </view>
    <view class="msg_wrap" wx:if="{{field[0].personbestmatch.isshow == '1' && isattendedindex == '1'}}">
      <view class="input_msg">
        <block wx:if="{{field[0].personbestmatch.mand == '1'}}">
          <view class="special_icon">
            <view></view>
            <view></view>
            <view></view>
          </view>
          <text class="msg_name_import long_msg">最好成绩赛事名称</text>
        </block>
        <block wx:else>
          <text class="msg_name long_msg">最好成绩赛事名称</text>
        </block>
        <input class="input_type input_long" data-name="personbestmatch" value="{{userdata.personbestmatch}}" type="text" placeholder="请输入最好成绩赛事" bindblur="bindmsg" />
      </view>
    </view>
    <view class="msg_wrap" wx:if="{{field[0].wishfinish.isshow == '1'}}">
      <view class="input_msg">
        <block wx:if="{{field[0].wishfinish.mand == '1'}}">
          <view class="special_icon">
            <view></view>
            <view></view>
            <view></view>
          </view>
          <text class="msg_name_import long_msg">预期完赛时间</text>
        </block>
        <block wx:else>
          <text class="msg_name long_msg">预期完赛时间</text>
        </block>
        <view class="go_down_icon"></view>
        <view class="picker_show pick_long" catchtap="finish_choice">{{userdata.wishfinish}}</view>
      </view>
    </view>
    <view class="msg_img_wrap" wx:if="{{field[0].proveimg.isshow == '1' || field[0].healthyimg.isshow == '1'}}">
      <view wx:if="{{field[0].proveimg.isshow == '1'}}" class="proveimg_wrap">
        <view wx:if="{{!prove_ok}}" class="up_img_wrap">
          <image class="up_img" src="{{prove_img}}" catchtap="up_prove"></image>
        </view>
        <view wx:else class="up_wrap_ok">
          <image class="up_img_ok" src="{{prove_img}}" catchtap="up_prove"></image>
        </view>
        <view class="img_title">完赛证明</view>
      </view>
      <view wx:if="{{field[0].healthyimg.isshow == '1'}}" class="healthyimg_wrap">
        <view wx:if="{{!healthy_ok}}" class="up_img_wrap">
          <image class="up_img" catchtap="up_healthy" src="{{healthy_img}}"></image>
        </view>
        <view wx:else class="up_wrap_ok">
          <image class="up_img_ok" catchtap="up_healthy" src="{{healthy_img}}"></image>
        </view>
        <view class="img_title">健康证明</view>
      </view>
    </view>
  </view>
  <view class="tj_wrap">
    <button type="primary" class="tj_btn" bindtap="btn_preview">提交</button>
  </view>
  <view wx:if="{{pick_mask}}" class="pick_mask">
    <view wx:if="{{finish_pick}}" class="finish_picker_wrap">
      <view class="btn_wrap">
        <text catchtap="mask_hide">取消</text>
        <text catchtap="finish_sure">确定</text>
      </view>
      <picker-view indicator-style="height:50px" class="pick_wrap" value="{{finish_value}}" bindchange="finish_change">
        <picker-view-column>
          <view wx:for="{{finish_hour}}" style="line-height: 50px;text-align:center">{{item}}小时</view>
        </picker-view-column>
        <picker-view-column>
          <view wx:for="{{finish_minute}}" style="line-height: 50px;text-align:center">{{item}}分钟</view>
        </picker-view-column>
        <picker-view-column>
          <view wx:for="{{finish_seconde}}" style="line-height: 50px;text-align:center">{{item}}秒</view>
        </picker-view-column>
      </picker-view>
    </view>
    <view wx:if="{{country_pick}}" class="finish_picker_wrap">
      <view class="btn_wrap">
        <text catchtap="mask_hide">取消</text>
        <text catchtap="country_sure">确定</text>
      </view>
      <picker-view indicator-style="height:50px" class="pick_wrap" value="{{country_value}}" bindchange="country_change">
        <picker-view-column>
          <view wx:for="{{country_continent}}" style="line-height: 50px;text-align:center">{{item}}</view>
        </picker-view-column>
        <picker-view-column>
          <view wx:for="{{show_country}}" style="line-height: 50px;text-align:center">{{item}}</view>
        </picker-view-column>
      </picker-view>
    </view>
    <view wx:if="{{area_pick}}" class="finish_picker_wrap">
      <view class="btn_wrap">
        <text catchtap="mask_hide">取消</text>
        <text catchtap="area_sure">确定</text>
      </view>
      <picker-view indicator-style="height:50px" class="pick_wrap" value="{{area_value}}" bindchange="area_change">
        <picker-view-column>
          <view wx:for="{{area_province}}" style="line-height: 50px;text-align:center">{{item}}</view>
        </picker-view-column>
        <picker-view-column>
          <view wx:for="{{show_city}}" style="line-height: 50px;text-align:center">{{item}}</view>
        </picker-view-column>
        <picker-view-column>
          <view wx:for="{{show_area}}" style="line-height: 50px;text-align:center">{{item}}</view>
        </picker-view-column>
      </picker-view>
    </view>
  </view>
</block>
<block wx:else>
  <view class="preview_wrap">
    <view class="preview_head">报名信息预览</view>
    <view class="preview_title_wrap">
      <view class="title_line"></view>
      <view class="preview_title_msg">基本信息</view>
    </view>
    <view class="preview_msg_wrap">
      <block wx:for="{{field[0]}}" wx:key-for="{{order}}">
        <block wx:if="{{item.isshow == '1' && item.field != 'isattended' && item.field != 'personbest' && item.field != 'personbestmatch' && item.field != 'wishfinish' && item.field != 'proveimg' && item.field != 'healthyimg'}}">
          <view class="preview_contain">
            <view class="preview_name">{{item.name}}</view>
            <view class="preview_msg">{{userdata[item.field]}}</view>
          </view>
        </block>
      </block>
      <view wx:if="{{field[0].isattended.isshow == '1' || field[0].personbest.isshow == '1' || field[0].personbestmatch.isshow == '1' || field[0].wishfinish.isshow == '1' || field[0].proveimg.isshow == '1' || field[0].healthyimg.isshow == '1'}}" class="preview_title_wrap">
        <view class="title_line"></view>
        <view class="preview_title_msg">参赛信息</view>
      </view>
      <block wx:for="{{field[0]}}" wx:key-for="{{order}}">
        <block wx:if="{{item.isshow == '1' && item.field == 'isattended' || item.field == 'personbest' || item.field == 'personbestmatch' || item.field == 'wishfinish' && item.field != 'proveimg' && item.field != 'healthyimg'}}">
          <view class="preview_contain">
            <view class="preview_name">{{item.name}}</view>
            <view class="preview_msg">{{userdata[item.field]}}</view>
          </view>
        </block>
      </block>
      <view class="msg_img_wrap preivew_img_wrap" wx:if="{{item.field != 'proveimg' && item.field != 'healthyimg' && field[0].proveimg.isshow == '1' || field[0].healthyimg.isshow == '1'}}">
        <view wx:if="{{field[0].proveimg.isshow == '1'}}" class="proveimg_wrap">
          <view wx:if="{{!prove_ok}}" class="up_img_wrap">
            <image class="up_img" src="{{prove_img}}"></image>
          </view>
          <view wx:else class="up_wrap_ok">
            <image class="up_img_ok" src="{{prove_img}}"></image>
          </view>
          <view class="img_title">完赛证明</view>
        </view>
        <view wx:if="{{field[0].healthyimg.isshow == '1'}}" class="healthyimg_wrap">
        <view wx:if="{{!healthy_ok}}" class="up_img_wrap">
          <image class="up_img" catchtap="up_healthy" src="{{healthy_img}}"></image>
        </view>
        <view wx:else class="up_wrap_ok">
          <image class="up_img_ok" catchtap="up_healthy" src="{{healthy_img}}"></image>
        </view>
        <view class="img_title">健康证明</view>
      </view>
      </view>
    </view>
  </view>
  <view class="preview_btn">
    <button class="go_back" type="primary" catchtap="btn_previewback">返回修改</button>
    <button wx:if="{{user_allnum == now_usernum}}" class="go_next" type="primary" catchtap="btn_tj">确认提交</button>
    <button wx:else class="go_next" type="primary" catchtap="btn_tj">下一位</button>
  </view>
</block>